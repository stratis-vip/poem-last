var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,c=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&o(e,a,t[a]);if(l)for(var a of l(t))r.call(t,a)&&o(e,a,t[a]);return e},s=(e,l)=>t(e,a(l));import{R as i,L as m,g as u,r as d,u as p,a as g,b as E,D as y,B as v,c as f,d as h,e as x,M as C,I as _,S as b,f as S,h as N,F as I,T as P,i as $,j as F,k,l as O,m as D,A as B,n as M,o as w,P as A,p as j}from"./vendor.150589cc.js";var q="_containerMain_1wmv3_1";var z="_headerMain_a88l0_1";var L="_navBar_1l88a_1",J="_navLink_1l88a_11";const R=()=>i.createElement("div",{className:L},i.createElement("div",{className:J},i.createElement(m,{to:"/"},"Home")),i.createElement("div",{className:J},i.createElement(m,{to:"/import"},"Import")),i.createElement("div",{className:J},i.createElement(m,{to:"/detail"},"detail")),i.createElement("div",{className:J},i.createElement(m,{to:"/add"},"Add")));var Q="_title_1sbva_1";const T=({title:e})=>i.createElement("div",{className:Q},e),H=()=>i.createElement("div",{className:z},i.createElement(T,{title:"Άπαντα Χριστοδούλου"}),i.createElement(R,null)),V=({children:e})=>i.createElement("div",{className:q},i.createElement(H,null),e),G=1,K=2;var U={poemContainer:"_poemContainer_1a1or_1",info:"_info_1a1or_24"};var W="_boldItalic_5px0p_20";var X="_pre_jx0v9_1",Y="_detailMain_jx0v9_5",Z="_bold_jx0v9_10";const ee=u`
    query dataPoems {
        countPoems
        countCategories
        maxIdPoems
        categories{id description}
        minMaxByCategory{
            min
            max
            category
        }
    }
`,te=u`
    query getPoembyId($id:Int!){
        getPoemById(id:$id){
            id
            idInCategory
            content
            category {
                id
                description
            }
            authDate
            explanation
        }
    }
`,ae=u`
    query Query($poemsOrder: String, $poemsCategory: ID, $poemsSearch: String) {
        poems(order: $poemsOrder, category: $poemsCategory, search: $poemsSearch) {
            id
            idInCategory
            content
            category {
                id
                description
            }
            authDate
            explanation
        }
    }
`,le=u`
    query query(
        $id: Int!
        $category: ID!
        $idInCategory: Int!
        $content: String!
    ) {
        getPoemById(id: $id) {
            id
        }
        getPoemByCategoryId(category: $category, idInCategory: $idInCategory) {
            id
        }
        getPoemByContent(content: $content) {
            id
        }
    }`,ne=u`
    mutation Mutation($input: PoemsInput!) {
        addPoem(input: $input) {
            id
        }
    }
`,re=u`
    mutation Mutation($input: [PoemsInput!]!) {
        addMassPoem(input: $input)
    }
`,oe=()=>{const[e,t]=d.exports.useState(null),{id:a}=p(),{loading:l,data:n,error:r,variables:o}=g(te,{variables:{id:Number(a)}});return d.exports.useEffect((()=>{n&&t(n.getPoemById)}),[n]),l?i.createElement(E,{active:!0}):e?i.createElement(V,null,i.createElement("div",{className:Y},i.createElement("h3",null,"Λεπτομέρειες για το κείμενο με αρθμό καταχώρησης ",e.id),i.createElement("div",null,i.createElement("span",{className:Z},"Κατηγορία: "),e.category.description),i.createElement("div",null,i.createElement("span",{className:Z},"Καταχώρηση στην κατηγορία: "),null==e?void 0:e.idInCategory),i.createElement("div",null,i.createElement("span",{className:Z},"Ημερομηνία συγγραφής: "),y.fromISO(e.authDate).toLocaleString(y.DATE_MED)),i.createElement("h3",null,"Κείμενο"),i.createElement("div",{className:X,key:null==e?void 0:e.id},null==e?void 0:e.content),e.explanation&&i.createElement("div",null,i.createElement("span",{className:Z},"Επεξηγήσεις: "),e.explanation),i.createElement("h3",null,"Παραπομπές"),i.createElement(m,{to:`/add/${e.id}`},i.createElement(v,null,"Επεξεργασία")))):r?i.createElement("h1",null,r.message):o?i.createElement("h2",null,JSON.stringify(o)):void 0},ce=(e,t,a)=>e?e.length>se?t?i.createElement("div",null,`${e.substring(0,se)}...`,i.createElement(v,{size:"mini",compact:!0,color:"green",onClick:()=>a(!1)},"περισσότερα")):i.createElement("div",null,e,i.createElement(v,{size:"mini",compact:!0,color:"green",onClick:()=>a(!0)},"λιγότερα")):i.createElement("div",null,e):null,se=150,ie=({poem:e,category:t})=>{const[a,l]=d.exports.useState(null),[n,r]=d.exports.useState(!0),o=ce(a,n,r),c=f((e=>e.loading)),[s,u]=d.exports.useState(null);return d.exports.useEffect((()=>{c&&c!==s&&(console.log("loading...",c),u(c))}),[c,s]),d.exports.useEffect((()=>{e&&l(e.content)}),[e]),d.exports.useEffect((()=>{n||ce(a,n,r)}),[n,a]),s?i.createElement(E,{active:!0}):e?i.createElement("div",{className:U.poemContainer},i.createElement("div",{className:U.info},i.createElement("label",{className:U.poemLabel},"Αρ. καταχώρησης: ",i.createElement("span",{className:W}," #",e.id)),i.createElement("label",{className:U.poemLabel},t," ",i.createElement("span",{className:W},"#",e.idInCategory)),i.createElement("label",{className:U.poemLabel},"Ημνία: ",i.createElement("span",{className:W},y.fromISO(e.authDate).toLocaleString(y.DATE_MED))),i.createElement(m,{to:`/detail/${e.id}`},i.createElement(v,{size:"mini",compact:!0,color:"blue"},"Λεπτομέρειες"))),i.createElement("pre",null,o)):i.createElement(i.Fragment,null,"Δεν υπάρχει τίποτα")};var me="_optionsContainer_k86uq_1",ue="_orderOptionsPanelHeader_k86uq_20",de="_resultsFounded_k86uq_28";const pe=h({name:"order",initialState:K,reducers:{setOrder:(e,t)=>t.payload}}),{setOrder:ge}=pe.actions;var Ee=pe.reducer;const ye=h({name:"currentCategory",initialState:"all",reducers:{setCategory:(e,t)=>t.payload}}),{setCategory:ve}=ye.actions;var fe=ye.reducer;var he="_centerFlex_fl0io_1",xe="_optionsFlexNT_fl0io_14",Ce="_optionsFlexNB_fl0io_20";const _e=[{key:"asc",text:"Αύξουσα",value:"asc"},{key:"desc",text:"Φθίνουσα",value:"desc"}],be=({search:e,setSearch:t})=>{const[a,l]=d.exports.useState(!1),n=f((e=>e.currentCategory)),r=f((e=>e.categories)),o=x(),c=f((e=>e.order)),[s,m]=d.exports.useState([{key:"all",text:"Σε όλες τις κατηγορίες",value:"all"}]);d.exports.useEffect((()=>{if(r){const e=[{key:"all",text:"Σε όλες τις κατηγορίες",value:"all"}];r.map((t=>e.push({key:t.id,text:t.description,value:t.id}))),m(e)}}),[r]);return i.createElement(i.Fragment,null,i.createElement(v,{color:"green",onClick:()=>l(!0)},"Αλλαγή"),i.createElement(C,{size:"small",open:a,onClose:()=>l(!1)},i.createElement(C.Header,null,"Επιλογές ταξινόμησης και αναζήτησης"),i.createElement(C.Content,null,i.createElement("div",{className:he},i.createElement("div",null,i.createElement("label",null,"Κείμενο αναζήτησης: ",i.createElement(_,{fluid:!0,type:"text",placeholder:"κείμενο αναζήτησης...",value:e||"",onChange:e=>{0===e.target.value.trim().length?t(null):t(e.target.value)}}))),i.createElement("div",{className:Ce},i.createElement("label",null,"Κατηγορία: ",i.createElement(b,{options:s,defaultValue:n,onChange:(e,{value:t})=>{o(ve(t))}})),i.createElement("label",null,"Ταξινόμηση: ",i.createElement(b,{compact:!0,options:_e,defaultValue:c===K?"desc":"asc",onChange:(e,{value:t})=>{o(ge((e=>{switch(e){case"asc":return G;default:return K}})(t)))}}))))),i.createElement(C.Actions,null,i.createElement("div",{className:xe},i.createElement(v,{positive:!0,type:"submit",onClick:()=>l(!1)},"Αναζήτηση"),i.createElement(v,{negative:!0,onClick:()=>l(!1)},"Ακύρωση")))))},Se=h({name:"refetchQueries",initialState:{statistics:!1,poems:!1},reducers:{refetchAll:e=>({statistics:!0,poems:!0}),setStatisticsRefetch:(e,{payload:t})=>s(c({},e),{statistics:t}),setPoemsRefetch:(e,{payload:t})=>s(c({},e),{poems:t})}}),{refetchAll:Ne,setStatisticsRefetch:Ie,setPoemsRefetch:Pe}=Se.actions;var $e=Se.reducer;const Fe=()=>{const{order:e,currentCategory:t,categories:a}=f((e=>e)),[l,n]=d.exports.useState(null),r=x(),{poems:o}=f((e=>e.refetchQueries)),{loading:c,error:s,data:m,refetch:u}=g(ae,{variables:{poemsCategory:"all"!==t?t:void 0,poemsOrder:e===K?"DESC":"ASC",poemsSearch:null!==l&&l.length>3?`%${l}%`:void 0}});d.exports.useEffect((async()=>{if(console.count(o),o){r(Pe(!1));const e=await u();console.log("poem refetch ",e)}}),[o]);return i.createElement(i.Fragment,null,i.createElement("div",{className:me},i.createElement("div",{className:ue},i.createElement("div",null,i.createElement("label",null,"Ταξινόμηση αποτελεσμάτων ημερολογιακά: ",i.createElement("span",{className:W},ke(e)))),i.createElement("div",null,i.createElement("label",null,"Φίλτρο: ",i.createElement("span",{className:W}," ","all"!==t?a.filter((e=>e.id===t))[0].description:"όλες οι κατηγορίες"))),i.createElement("div",null,i.createElement(be,{search:l,setSearch:n})))),s?i.createElement("h1",null,s.message):c?i.createElement(E,{active:!0}):0===(null==m?void 0:m.poems.length)?i.createElement("div",{className:de},"Δεν υπάρχουν αποτελέσματα με αυτά τα κριτήρια "):m?i.createElement(i.Fragment,null,i.createElement("div",{className:de},(null==m?void 0:m.poems.length)>1?`Βρέθηκαν ${null==m?void 0:m.poems.length} κείμενα.`:`Βρέθηκε ${null==m?void 0:m.poems.length} κείμενο`),null==m?void 0:m.poems.map((e=>i.createElement(ie,{key:e.id,poem:e,category:e.category.description})))):void 0)},ke=e=>"asc"===(e=>{switch(e){case G:return"asc";default:return"desc"}})(e)?"Αύξουσα":"Φθίνουσα";var Oe="_addPoemContainer_3dfev_1";const De=({values:e,setExists:t,check:a})=>{const{idInCategory:l,category:n,id:r,content:o}=e,[c,s]=d.exports.useState([]),[m,{loading:u,variables:p,error:g,data:E}]=S(le,{variables:{idInCategory:Number(l),category:n,id:Number(r),content:o}});return d.exports.useEffect((()=>{a?m():s([])}),[a]),d.exports.useEffect((()=>{if(E){const e=[],{getPoemByCategoryId:a,getPoemByContent:n,getPoemById:o}=E;a.length>0&&e.push(`Υπάρχει ήδη καταχώρηση με idCategory = ${l}!`),n.length>0&&e.push("Υπάρχει ήδη καταχώρηση με αυτό το κείμενο!"),null!=o&&e.push(`Υπάρχει ήδη καταχώρηση με  id = ${r}!`),s(e),t(e.length>0)}}),[E]),d.exports.useEffect((()=>{g&&console.log("error",JSON.stringify(g,null,2))}),[g]),g?i.createElement(i.Fragment,null,"Error"):u?i.createElement(i.Fragment,null,"Loading"):(null==c?void 0:c.length)>0?i.createElement(i.Fragment,null,c.map(((e,t)=>i.createElement("div",{key:t},e)))):a?i.createElement(i.Fragment,null,"Η καταχώριση είναι έτοιμη για αποθήκευση!"):i.createElement(i.Fragment,null)},Be=({values:e})=>{const[t,a]=d.exports.useState([]);return d.exports.useEffect((()=>{e&&(()=>{const t=[];(null==e.id||e.id<=0||""===e.id)&&t.push("Δεν δώθηκε σωστό id (μικρότερό απο το 0 ή κενό"),null==e.authDate&&t.push("Δεν δώθηκε ημερομηνία"),null!=e.category&&"all"!==e.category||t.push("Δεν ορίσθηκε κατηγορία"),null!=e.idInCategory&&""!==e.idInCategory||t.push("Δεν δώθηκε σωστό id για στην κατηγορία"),(null==e.content||e.content.trim().length<5)&&t.push("Δεν δώθηκε σωστό κείμενο (κενό ή  πολύ μικρό σε μέγεθος)"),a(t),t.length})()}),[e]),t.length>0?i.createElement(i.Fragment,null,i.createElement("h2",null,"Υπάρχουν λάθη"),t.map(((e,t)=>i.createElement("div",{key:t},e)))):i.createElement(i.Fragment,null)},Me=()=>{const[e,t]=d.exports.useState([{key:"all",text:"Σε όλες τις κατηγορίες",value:"all"}]),{categories:a,info:l,minMaxByCategory:n}=f((e=>e)),[r,o]=d.exports.useState(!1),[m,u]=d.exports.useState(!1),[p,g]=d.exports.useState({}),[h,x]=d.exports.useState(!0),[C,S]=d.exports.useState({authDate:y.local().toISODate()}),[F,{data:k,loading:O,error:D,variables:B}]=N(ne,{variables:{input:{id:Number(C.id),idInCategory:Number(C.idInCategory),content:C.content,category:C.category,authDate:C.authDate,explanation:C.explanation}}}),M=(e,{value:t})=>{const a=$(C);a[e.target.name]=t,S(a)};return d.exports.useEffect((()=>{if(a){const e=[];a.map((t=>e.push({key:t.id,text:t.description,value:t.id}))),t(e),console.log(e)}}),[a]),d.exports.useEffect((()=>{l&&S(s(c({},C),{id:l.maxIdPoems+1}))}),[l]),d.exports.useEffect((()=>{console.log(e,"options")}),[e]),d.exports.useEffect((()=>{o((e=>{const t=[];return(null==e.id||e.id<=0||""===e.id)&&t.push("Δεν τέθηκε id ή ήταν μικρότερη απο το 0 ή κενή"),null==e.authDate&&t.push("δεν δώθηκε ημερομνηία"),null!=e.category&&"all"!==e.category||t.push("Δεν ορίσθηκε κατηγορία"),null!=e.idInCategory&&""!==e.idInCategory||t.push("δεν δώθηκε id στην κατηγορία"),(null==e.content||e.content.trim().length<5)&&t.push("δεν δώθηκε κείμενο ή είναι πολύ μικρό"),0===t.length})(C))}),[C,o]),d.exports.useEffect((()=>{k&&(console.log("lazy, data ",k),o(!1),alert(`Επιτυχής καταχώριση! Ιd ${null==k?void 0:k.addPoem.id}`))}),[k]),d.exports.useEffect((()=>{console.log("lazy loading,",O)}),[O]),d.exports.useEffect((()=>{D&&console.log("lazy error,",JSON.stringify(D,null,2))}),[D]),i.createElement(V,null,i.createElement(E,{content:"Αποθήκευση...",active:O}),i.createElement("div",{className:Oe},i.createElement("h3",null,"Προσθήκη καταχώρισης"),i.createElement(I,null,m&&i.createElement("div",null,i.createElement("h4",null,"Υπάρχουν αλλαγές")," ",i.createElement("textarea",{value:JSON.stringify(p),readOnly:!0})),i.createElement(I.Group,{widths:"equal"},i.createElement(I.Field,{control:_,label:"Γενικός αριθμός καταχώρησης",type:"number",width:3,value:(null==C?void 0:C.id)||"",onChange:M,name:"id"}),i.createElement(I.Field,{control:_,label:"Αριθμός καταχώρησης Κατηγορίας",type:"number",width:3,value:(null==C?void 0:C.idInCategory)||"",onChange:M,name:"idInCategory"}),i.createElement(I.Field,{control:_,label:"Ημερομηνία συγγραφής",type:"date",width:3,value:C.authDate||"",onChange:M,name:"authDate"})),i.createElement(I.Field,{control:b,options:e,label:"Κατηγορία",placeholder:"επιλογή κατηγορίας...",name:"category",value:C.category||"",onChange:(e,{value:t})=>{const a=n.filter((e=>e.category===t))[0].max;S(s(c({},C),{category:t,idInCategory:a+1}))}}),i.createElement(I.Field,{control:P,label:"Κείμενο",name:"content",value:C.content||"",onChange:M,onFocus:e=>we(e.target)}),i.createElement(I.Field,{control:P,label:"Επεξήγηση",name:"explanation",value:null!==C.explanation?C.explanation:"",onChange:M,onFocus:e=>we(e.target)}),i.createElement(I.Field,{control:v,disabled:h,onClick:e=>{e.preventDefault(),console.log(C),F()}},"Καταχώρηση αλλαγών"))),i.createElement(Be,{values:C}),i.createElement(De,{check:r,setExists:x,values:C}))};function we(e){e.style.height="5px",e.style.height=e.scrollHeight+10+"px"}const Ae=h({name:"categories",initialState:null,reducers:{addAllCategories:(e,t)=>t.payload}}),{addAllCategories:je}=Ae.actions;var qe=Ae.reducer;const ze=h({name:"info",initialState:null,reducers:{addAllInfo:(e,t)=>t.payload}}),{addAllInfo:Le}=ze.actions;var Je=ze.reducer;const Re=h({name:"minMaxByCategories",initialState:null,reducers:{addAllMinMaxByCategories:(e,t)=>t.payload}}),{addAllMinMaxByCategories:Qe}=Re.actions;var Te=Re.reducer;var He="_importContainer_1oocf_1";const Ve=()=>{const[e,t]=d.exports.useState(null),a=x(),[l,n]=d.exports.useState(null),[r,{called:o,data:c,loading:s,error:m}]=N(re,{variables:{input:null==l?void 0:l.poems}});return d.exports.useEffect((async()=>{if(l)try{const e=await r();a(Ne()),console.log(e)}catch(e){console.log(JSON.stringify(e,null,2))}}),[l]),d.exports.useEffect((()=>{c&&console.log(c)}),[c]),d.exports.useEffect((()=>{m&&console.log(m)}),[m]),d.exports.useEffect((()=>{if(e){const t=new FileReader;t.readAsText(e,"utf8"),t.onloadend=e=>{const t=JSON.parse(e.target.result);n(t),console.log(t)}}}),[e]),i.createElement(V,null,i.createElement(E,{active:s}),i.createElement("h1",null,"import ",null==e?void 0:e.name," ",null==e?void 0:e.size),i.createElement("div",{className:He},i.createElement("input",{type:"file",accept:".json",onChange:e=>{const a=e.target.files[0];t(a)}}),i.createElement(v,{primary:!0,disabled:!e,onClick:()=>{}},"Εισαγωγή ",null==l?void 0:l.poems.length)))},Ge=()=>i.createElement(i.Fragment,null,i.createElement(V,null,i.createElement(Fe,null)));function Ke(){const e=x(),{statistics:t}=f((e=>e.refetchQueries)),[a,{loading:l,data:n,refetch:r}]=S(ee);return d.exports.useEffect((()=>{if(n){console.log(n);const{countPoems:t,countCategories:a,maxIdPoems:l,categories:r,minMaxByCategory:o}=n;e(Le({countPoems:t,countCategories:a,maxIdPoems:l})),e(Qe(o)),e(je(r))}}),[n]),d.exports.useEffect((()=>{a()}),[]),d.exports.useEffect((async()=>{if(t){e(Ie(!1));try{const e=await r();console.log("statistics",e)}catch(a){console.log(JSON.stringify(a,null,2))}}}),[t]),l?i.createElement(E,{content:"Ανάκτηση δεδομένων...",active:!0}):i.createElement(F,null,i.createElement("div",{className:"App"},i.createElement(k,null,i.createElement(O,{path:"/import"},i.createElement(Ve,null)),i.createElement(O,{path:"/detail/:id"},i.createElement(oe,null)),i.createElement(O,{path:"/add"},i.createElement(Me,null)),i.createElement(O,{path:"/"},i.createElement(Ge,null)))))}const Ue=D({reducer:{categories:qe,currentCategory:fe,order:Ee,info:Je,minMaxByCategory:Te,refetchQueries:$e}});const We=new B({uri:"https://sqlite.texnopraksis.com/",cache:new M});w.render(i.createElement(A,{store:Ue},i.createElement(j,{client:We},i.createElement(Ke,null))),document.getElementById("root"));
