var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,c=(e,t)=>{for(var l in t||(t={}))n.call(t,l)&&o(e,l,t[l]);if(a)for(var l of a(t))r.call(t,l)&&o(e,l,t[l]);return e},s=(e,a)=>t(e,l(a));import{c as i,R as m,L as u,a as d,r as E,u as p,b as g,D as v,B as f,d as h,M as y,I as _,S as x,e as b,F as C,T as N,H as S,f as k,g as O,h as I,i as F,P as D}from"./vendor.05629af9.js";let w;const j={};const P=i({name:"content",initialState:null,reducers:{addAllPoems:(e,t)=>t.payload}}),{addAllPoems:L}=P.actions;var A=P.reducer;const z=i({name:"categories",initialState:null,reducers:{addAllCategories:(e,t)=>t.payload}}),{addAllCategories:M}=z.actions;var T=z.reducer;var $="_containerMain_1wmv3_1";var q="_headerMain_a88l0_1";var H="_navBar_1l88a_1",B="_navLink_1l88a_11";const R=()=>m.createElement("div",{className:H},m.createElement("div",{className:B},m.createElement(u,{to:"/"},"Home")),m.createElement("div",{className:B},m.createElement(u,{to:"/about"},"About")),m.createElement("div",{className:B},m.createElement(u,{to:"/detail"},"detail")));var V="_title_1sbva_1";const G=({title:e})=>m.createElement("div",{className:V},e),J=()=>m.createElement("div",{className:q},m.createElement(G,{title:"Άπαντα Χριστοδούλου"}),m.createElement(R,null)),U=({children:e})=>m.createElement("div",{className:$},m.createElement(J,null),e),W=1,K=2,Q=(e,t)=>{let l=null,a=null;for(const n of e){const e=n[t];e>=l?l=e:e<=a&&(a=e),null===a&&(a=l)}return{min:a,max:l}},X=(e,t,l=K)=>{const a=d(e),n=e=>Number(e[t].split("-").join(""));return a.sort(((e,t)=>l===W?n(e)-n(t):n(t)-n(e)))};var Y={poemContainer:"_poemContainer_1a1or_1",info:"_info_1a1or_24"};var Z="_boldItalic_5px0p_20";const ee=(e,t,l)=>e?e.length>te?t?m.createElement("div",null,`${e.substring(0,te)}...`,m.createElement(f,{size:"mini",compact:!0,color:"green",onClick:()=>l(!1)},"περισσότερα")):m.createElement("div",null,e,m.createElement(f,{size:"mini",compact:!0,color:"green",onClick:()=>l(!0)},"λιγότερα")):m.createElement("div",null,e):null,te=150,le=({poem:e,category:t})=>{const[l,a]=E.exports.useState(null),[n,r]=E.exports.useState(!0),o=ee(l,n,r),c=p((e=>e.loading)),[s,i]=E.exports.useState(null);return E.exports.useEffect((()=>{c&&c!==s&&(console.log("loading...",c),i(c))}),[c,s]),E.exports.useEffect((()=>{e&&a(e.content)}),[e]),E.exports.useEffect((()=>{n||ee(l,n,r)}),[n,l]),s?m.createElement(g,{active:!0}):e?m.createElement("div",{className:Y.poemContainer},m.createElement("div",{className:Y.info},m.createElement("label",{className:Y.poemLabel},"Αρ. καταχώρησης: ",m.createElement("span",{className:Z}," #",e.id)),m.createElement("label",{className:Y.poemLabel},t," ",m.createElement("span",{className:Z},"#",e.idInCategory)),m.createElement("label",{className:Y.poemLabel},"Ημνία: ",m.createElement("span",{className:Z},v.fromISO(e.authDate).toLocaleString(v.DATE_MED))),m.createElement(u,{to:`/detail/${e.id}`},m.createElement(f,{size:"mini",compact:!0,color:"blue"},"Λεπτομέρειες"))),m.createElement("pre",null,o)):m.createElement(m.Fragment,null,"Δεν υπάρχει τίποτα")};var ae="_optionsContainer_k86uq_1",ne="_orderOptionsPanelHeader_k86uq_20",re="_resultsFounded_k86uq_28";const oe=i({name:"loading",initialState:!1,reducers:{setLoading:(e,t)=>t.payload}}),{setLoading:ce}=oe.actions;var se=oe.reducer;const ie=i({name:"order",initialState:K,reducers:{setOrder:(e,t)=>t.payload}}),{setOrder:me}=ie.actions;var ue=ie.reducer;const de=i({name:"currentCategory",initialState:"all",reducers:{setCategory:(e,t)=>t.payload}}),{setCategory:Ee}=de.actions;var pe=de.reducer;var ge="_centerFlex_fl0io_1",ve="_optionsFlexNT_fl0io_14",fe="_optionsFlexNB_fl0io_20";function he(e,t){switch(t.type){case"close":return{open:!1};case"open":return{open:!0,size:t.size};default:throw new Error("Unsupported action...")}}const ye=[{key:"asc",text:"Αύξουσα",value:"asc"},{key:"desc",text:"Φθίνουσα",value:"desc"}],_e=()=>{const[e,t]=m.useReducer(he,{open:!1,size:void 0}),{open:l,size:a}=e,n=p((e=>e.currentCategory)),r=p((e=>e.categories)),o=h(),c=p((e=>e.order)),[s,i]=E.exports.useState([{key:"all",text:"Σε όλες τις κατηγορίες",value:"all"}]);E.exports.useEffect((()=>{if(r){const e=[{key:"all",text:"Σε όλες τις κατηγορίες",value:"all"}];for(const t of Object.keys(r))e.push({key:t,text:r[t],value:t});i(e)}}),[r]);return m.createElement(m.Fragment,null,m.createElement(f,{color:"green",onClick:()=>t({type:"open",size:"small"})},"Αλλαγή"),m.createElement(y,{size:a,open:l,onClose:()=>t({type:"close"})},m.createElement(y.Header,null,"Επιλογές ταξινόμησης και αναζήτησης"),m.createElement(y.Content,null,m.createElement("div",{className:ge},m.createElement("div",null,m.createElement("label",null,"Κείμενο αναζήτησης: ",m.createElement(_,{fluid:!0,type:"text",placeholder:"κείμενο αναζήτησης..."}))),m.createElement("div",{className:fe},m.createElement("label",null,"Κατηγορία: ",m.createElement(x,{options:s,defaultValue:n,onChange:(e,{value:t})=>{o(Ee(t))}})),m.createElement("label",null,"Ταξινόμηση: ",m.createElement(x,{compact:!0,options:ye,defaultValue:c===K?"desc":"asc",onChange:(e,{value:t})=>{o(me((e=>{switch(e){case"asc":return W;default:return K}})(t)))}}))))),m.createElement(y.Actions,null,m.createElement("div",{className:ve},m.createElement(f,{positive:!0,type:"submit",onClick:()=>t({type:"close"})},"Αναζήτηση"),m.createElement(f,{negative:!0,onClick:()=>t({type:"close"})},"Ακύρωση")))))},xe=()=>{const{content:e,order:t,categories:l,currentCategory:a,loading:n}=p((e=>e)),r=h(),[o,c]=E.exports.useState(null);E.exports.useEffect((()=>{if(e&&t&&a){if("all"===a)c(X(e,"authDate",t));else{const l=e.filter((e=>e.category===a));c(X(l,"authDate",t))}r(ce(!1))}else n||r(ce(!0))}),[e,t,a,r]);return m.createElement(m.Fragment,null,m.createElement("div",{className:ae},m.createElement("div",{className:ne},m.createElement("div",null,m.createElement("label",null,"Ταξινόμηση αποτελεσμάτων ημερολογιακά: ",m.createElement("span",{className:Z},be(t)))),m.createElement("div",null,m.createElement("label",null,"Φίλτρο: ",m.createElement("span",{className:Z}," ","all"!==a?l[a]:"όλες οι κατηγορίες"))),m.createElement("div",null,m.createElement(_e,null)))),n?m.createElement(g,{active:!0}):o&&0!==o.length?(null==o?void 0:o.length)>0?m.createElement(m.Fragment,null,m.createElement("div",{className:re},o.length>1?`Βρέθηκαν ${o.length} κείμενα.`:`Βρέθηκε ${o.length} κείμενο`),o.map((e=>m.createElement(le,{key:e.id,poem:e,category:l[e.category]})))):void 0:m.createElement("div",{className:re},"Δεν υπάρχουν αποτελέσματα με αυτά τα κριτήρια "))},be=e=>"asc"===(e=>{switch(e){case W:return"asc";default:return"desc"}})(e)?"Αύξουσα":"Φθίνουσα";var Ce="_pre_jx0v9_1",Ne="_detailMain_jx0v9_5",Se="_bold_jx0v9_10";const ke=()=>{const e=p((e=>e.content)),t=p((e=>e.categories)),[l,a]=E.exports.useState(null),{id:n}=b();return E.exports.useEffect((()=>{if(e){const t=e.filter((e=>e.id===Number(n)));t.length>0&&a(t[0])}}),[e,a,n]),null===l?m.createElement(g,{active:!0}):m.createElement(U,null,m.createElement("div",{className:Ne},m.createElement("h3",null,"Λεπτομέρειες για το κείμενο με αρθμό καταχώρησης ",l.id),t&&m.createElement("div",null,m.createElement("span",{className:Se},"Κατηγορία: "),t[l.category]),m.createElement("div",null,m.createElement("span",{className:Se},"Καταχώρηση στην κατηγορία: "),null==l?void 0:l.idInCategory),m.createElement("div",null,m.createElement("span",{className:Se},"Ημερομηνία συγγραφής: "),v.fromISO(l.authDate).toLocaleString(v.DATE_MED)),m.createElement("h3",null,"Κείμενο"),m.createElement("div",{className:Ce,key:null==l?void 0:l.id},null==l?void 0:l.content),l.explanation&&m.createElement("div",null,m.createElement("span",{className:Se},"Επεξηγήσεις: "),l.explanation),m.createElement("h3",null,"Παραπομπές"),m.createElement(u,{to:`/add/${l.id}`},m.createElement(f,null,"Επεξεργασία"))))};var Oe="_addPoemContainer_3dfev_1";const Ie=0,Fe=1,De=()=>{const[e,t]=E.exports.useState([{key:"all",text:"Σε όλες τις κατηγορίες",value:"all"}]),{categories:l,content:a}=p((e=>e)),[n,r]=E.exports.useState(null),[o,i]=E.exports.useState(null),[u,g]=E.exports.useState(Ie),[y,S]=E.exports.useState(null);E.exports.useState(!1);const[k,O]=E.exports.useState(!1),[I,F]=E.exports.useState({}),[D,w]=E.exports.useState({authDate:v.local().toISODate()}),{id:j}=b(),P=h(),L=(e,{value:t})=>{const l=d(D),a=e.target.name;l[a]=t,console.log(t,"!==",y[a]);const n="string"==typeof t?t:Number(t);if(n!==y[a])F(s(c({},I),{[a]:n})),O((e=>e||!0));else{const e=d(I);delete e[a],F(e)}w(l)};return E.exports.useEffect((()=>{console.log("changes φρομ useeffect",I),0===Object.keys(I).length&&O(!1)}),[I,O]),E.exports.useEffect((()=>{if(a&&j){g(Fe);const e=a.filter((e=>e.id===Number(j)));e.length>0&&S(e[0])}}),[j,a]),E.exports.useEffect((()=>{if(l){const e=[],n=Object.keys(l);for(const t of n)e.push({key:t,text:l[t],value:t});if(t(e),u===Ie){const e=a.filter((e=>e.category===n[0])),{max:t}=Q(e,"idInCategory");console.log("max inCat",t),i(t+1),w({category:n[0],idInCategory:t+1})}else{const{id:e,idInCategory:t,authDate:l,category:a,content:n,explanation:r}=y;w({authDate:l,category:a,id:e,idInCategory:t,content:n,explanation:r})}}}),[l,u,a,y]),E.exports.useEffect((()=>{if(a){const{max:e}=Q(a,"id");r(e+1),w({id:e+1})}}),[a]),m.createElement(U,null,m.createElement("div",{className:Oe},u===Fe?m.createElement("h3",null,"Επεξεργασία καταχώρισης"):m.createElement("h3",null,"Προσθήκη καταχώρισης"),m.createElement(C,null,k&&m.createElement("div",null,m.createElement("h4",null,"Υπάρχουν αλλαγές")," ",m.createElement("textarea",{value:JSON.stringify(I),readOnly:!0})),m.createElement(C.Group,{widths:"equal"},m.createElement(C.Field,{control:_,label:"Γενικός αριθμός καταχώρησης",type:"number",width:"3",min:n,value:(null==D?void 0:D.id)||"",onChange:L,name:"id"}),m.createElement(C.Field,{control:_,label:"Αριθμός καταχώρησης Κατηγορίας",type:"number",width:"3",min:o,value:(null==D?void 0:D.idInCategory)||"",onChange:L,name:"idInCategory"}),m.createElement(C.Field,{control:_,label:"Ημερομηνία συγγραφής",type:"date",width:"3",value:D.authDate||"",onChange:L,name:"authDate"})),m.createElement(C.Field,{control:x,options:e,label:"Κατηγορία",placeholder:"επιλογή κατηγορίας...",name:"category",value:D.category||"",onChange:(e,{value:t})=>{const l=a.filter((e=>e.category===t)),{min:n,max:r}=Q(l,"idInCategory");if(console.log(n,r),w(s(c({},D),{category:t,idInCategory:r+1})),i(r+1),t!==y.category)F(s(c({},I),{category:t})),O((e=>e||!0));else{const e=d(I);delete e.category,F(e)}}}),m.createElement(C.Field,{control:N,label:"Κείμενο",name:"content",value:D.content||"",onChange:L,onFocus:e=>we(e.target)}),m.createElement(C.Field,{control:N,label:"Επεξήγηση",name:"explanation",value:null!==D.explanation?D.explanation:"",onChange:L,onFocus:e=>we(e.target)}),m.createElement(C.Field,{control:f,disabled:!k,onClick:e=>{if(e.preventDefault(),k){console.log("send dispatch",D,"\nchanges",I);const e=y.changes?y.changes:[],t=d(D);e.push(s(c({},I),{changeTime:v.now().set({milliseconds:0}).toISO({format:"basic",includeOffset:!1,suppressMilliseconds:!0})})),t.changes=e,P({type:"EDIT_POEM",payload:{oldId:y.id,newPoem:t}}),O(!1)}else console.log("nothing change")}},"Καταχώρηση αλλαγών"))))};function we(e){e.style.height="5px",e.style.height=e.scrollHeight+10+"px"}const je=()=>m.createElement(m.Fragment,null,m.createElement(U,null,m.createElement("h4",null,"About"))),Pe=()=>m.createElement(m.Fragment,null,m.createElement(U,null,m.createElement(xe,null)));function Le(){E.exports.useState(0);const{content:e,categories:t}=p((e=>e)),l=h();E.exports.useEffect((()=>{e||a(),console.log("useeffect",e)}),[e,t]);const a=()=>{console.count("loadContent"),function(e,t){if(!t)return e();if(void 0===w){const e=document.createElement("link").relList;w=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in j)return;j[e]=!0;const t=e.endsWith(".css"),l=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${l}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":w,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))}((()=>import("./poems.68a3b67d.js")),void 0).then((e=>{var t;(null==(t=null==e?void 0:e.poems)?void 0:t.length)>0&&l(L(e.poems)),(null==e?void 0:e.categories)&&l(M(e.categories))})).catch((e=>console.error(e)))};return m.createElement(S,null,m.createElement("div",{className:"App"},m.createElement(k,null,m.createElement(O,{path:"/about"},m.createElement(je,null)),m.createElement(O,{path:"/detail/:id"},m.createElement(ke,null)),m.createElement(O,{path:"/add/:id"},m.createElement(De,null)),m.createElement(O,{path:"/"},m.createElement(Pe,null)))))}const Ae=I({reducer:{content:A,categories:T,currentCategory:pe,order:ue,loading:se}});F.render(m.createElement(D,{store:Ae},m.createElement(Le,null)),document.getElementById("root"));
